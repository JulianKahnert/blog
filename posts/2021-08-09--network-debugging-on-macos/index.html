<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="ju ka"/><link rel="canonical" href="https://juliankahnert.de/posts/2021-08-09--network-debugging-on-macos"/><meta name="twitter:url" content="https://juliankahnert.de/posts/2021-08-09--network-debugging-on-macos"/><meta name="og:url" content="https://juliankahnert.de/posts/2021-08-09--network-debugging-on-macos"/><title>Network debugging on macOS | ju ka</title><meta name="twitter:title" content="Network debugging on macOS | ju ka"/><meta name="og:title" content="Network debugging on macOS | ju ka"/><meta name="description" content="There are several tools on macOS which help you debug your network connection. Let's have a look at them while creating a checklist for your next debugging session."/><meta name="twitter:description" content="There are several tools on macOS which help you debug your network connection. Let's have a look at them while creating a checklist for your next debugging session."/><meta name="og:description" content="There are several tools on macOS which help you debug your network connection. Let's have a look at them while creating a checklist for your next debugging session."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/fonts.css" type="text/css"/><link rel="stylesheet" href="/code.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/img/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to ju ka"/><meta name="twitter:image" content="https://juliankahnert.de/img/memoji.png"/><meta name="og:image" content="https://juliankahnert.de/img/memoji.png"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">ju ka</a><nav><ul><li><a class="selected" href="/posts">My posts</a></li><li><a href="/about">About Me</a></li></ul></nav></div></header><hr/><div class="wrapper"><article><h1>Network debugging on macOS</h1><div class="content"><p>The last time someone asked <em>My internet is broken, can you help me?</em> I thought a blogpost might be a good way to share some tools macOS contains that can help to debug your network (future me âœ‹).</p><p>In this post I want to show some tips and tricks on how to find common networking problems.</p><p>When I approach a networking problem, I try to get some structure in my debugging workingflow by using the <a href="https://en.wikipedia.org/wiki/OSI_model">OSI model</a>. We will have a look at each layer and try to isolate the problem layer by layer.</p><h2>OSI layers</h2><p>In the following section we will have a look at each layer and try to find some tips and tricks for debugging. It is intended to be a short checklist and therefore does not include more in-depth details on each step.</p><h3><strong>1-2</strong> Physical, Data Link</h3><ul><li>Ethernet cable plugged in?</li><li>LEDs on ethernet port flashing?</li><li>WLAN signal quality:<ul><li>Open <code>Wireless Diagnostics.app</code> &gt; Menu Bar open <code>Window</code> &gt; <code>Info</code> &amp; <code>Performance</code></li><li>The <code>Info</code> window gives you some clues on your current network (Channel, Channel Band, Active PHY Mode etc.)</li><li><code>Performance</code>: Are there variations in e.g. the noise and the resulting Received Signal Strength Indication (RSSI)?</li></ul></li></ul><h3><strong>3</strong> Network</h3><ul><li>Is the cloudflare namesever reachable: <code>ping 1.1</code> (aka. <code>ping 1.0.0.1</code>)</li><li>Do I have the right <code>IP address</code>?<ul><li><code>169.254.0.0/16</code> are link local addresses (<a href="https://datatracker.ietf.org/doc/html/rfc5735">RFC5735</a>) that might be self assigned by your machine -&gt; DHCP servier not reachable.</li><li>IP address of guest network?</li></ul></li></ul><h3><strong>4-7</strong> Transport, Session, Presentation, Application</h3><ul><li>Is the DNS resolution working properly?<ul><li>Get DNS record <code>$ dig A juliankahnert.de</code></li><li>Ask a specific namesever: <code>$ dig A juliankahnert.de @1.1</code></li><li>Response correct (HTTP status code etc.) <code>$ curl -I http://juliankahnert.de</code></li><li>Validate the <a href="https://serverfault.com/a/749381">certifcate</a>: <code>$ curl --insecure -vvI https://juliankahnert.de/ 2&gt;&amp;1 | awk 'BEGIN { cert=0 } /^\* SSL connection/ { cert=1 } /^\*/ { if (cert) print }'</code></li></ul></li></ul><h2>Other Use Cases</h2><h3>Where runs the server of ...?</h3><p>Tools like <a href="https://ipinfo.io">ipinfo</a> help you to find the <a href="<https://en.wikipedia.org/wiki/Autonomous_system_(Internet">ASN</a>&gt;) and its name. This can reveal the hoster (e.g. <em>Hetzner</em> or <em>Uberspace</em>).</p><h3>Where can I change the DNS records?</h3><p>You might have more than one registrar and want to find to namesever responsible for a (sub)domain.</p><pre><code>$ dig <span class="type">NS</span> juliankahnert.<span class="property">de</span>
</code></pre><p>More information: <a href="https://media.ccc.de/v/35c3-9674-domain_name_system">35c3: Domain Name System</a></p><h3>DNS: Clear Cache</h3><p>If you have changed DNS records and you can clear the cache of some nameservers:</p><ul><li><a href="https://1.1.1.1/purge-cache/">Cloudflare</a></li><li><a href="https://developers.google.com/speed/public-dns/cache">Google</a></li></ul><p>You can use a <a href="https://dnschecker.org">DNS Checker</a> to valide DNS changes.</p><p>Tip: Set a short DNS record TTL some time before you make changes. This will speed up the DNS propagation and your testing afterwards.</p><h3>Network Performance</h3><p>Since macOS Monterey there is a <code>networkQuality</code> CLI included in the OS. This is a nice way to test the <a href="https://danpetrov.xyz/macos/2021/11/14/analysing-network-quality-macos.html">transport layer</a> of your network.</p><pre><code>$ networkQuality
==== <span class="type">SUMMARY</span> ====
<span class="type">Upload</span> capacity: <span class="number">20.014</span> <span class="type">Mbps
Download</span> capacity: <span class="number">183.036</span> <span class="type">Mbps
Upload</span> flows: <span class="number">16</span>
<span class="type">Download</span> flows: <span class="number">20</span>
<span class="type">Responsiveness</span>: <span class="type">Medium</span> (<span class="number">467</span> <span class="type">RPM</span>)
</code></pre><h2>Conclusion</h2><p>There are several ways to approach a networking problem. The tools described in the article can give you some first insight.</p><p>If you think there are some tips, tricks or tools missing just leave me some <a href="mailto:feedback@juliankahnert.de">feedback</a>. I love to add them to this post! ðŸ¤“</p></div><span>Tagged with: </span><ul class="tag-list"><li class="tag-orange"><a href="/tags/hacking">hacking</a></li><li class="tag-orange"><a href="/tags/macos">macos</a></li><li class="tag-orange"><a href="/tags/network">network</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a class="social-icon" target="_blank" href="/feed.rss"><img src="/img/logo-rss.svg"/></a><a class="social-icon" target="_blank" href="https://twitter.com/JulianKahnert"><img src="/img/logo-twitter.svg"/></a><a class="social-icon" target="_blank" href="https://github.com/JulianKahnert"><img src="/img/logo-github.svg"/></a><a class="social-icon" target="_blank" href="https://www.xing.com/profile/Julian_Kahnert"><img src="/img/logo-xing.svg"/></a></p></footer></body></html>